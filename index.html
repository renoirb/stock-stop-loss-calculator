<!DOCTYPE html>
<html>
<head>
    <title>Stock Stop Loss & Re-entry Calculator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 600px;
            margin: 2rem auto;
            padding: 0 1rem;
            line-height: 1.5;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #0052a3;
        }
        .results {
            margin-top: 2rem;
            padding: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            display: none;
        }
        .risk-level {
            font-weight: bold;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        .order-explanation {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 4px;
        }
        .exit-entry {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .exit, .entry {
            padding: 0.5rem;
            background: #fff;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Stock Stop Loss & Re-entry Calculator</h1>
    
    <form id="stopLossForm">
        <div class="form-group">
            <label for="shares">Number of Shares:</label>
            <input type="number" id="shares" required min="1" step="1">
        </div>
        
        <div class="form-group">
            <label for="avgCost">Average Cost per Share ($):</label>
            <input type="number" id="avgCost" required min="0.01" step="0.01">
        </div>
        
        <div class="form-group">
            <label for="currentPrice">Current Market Price ($):</label>
            <input type="number" id="currentPrice" required min="0.01" step="0.01">
        </div>
        
        <button type="submit">Calculate Exit & Re-entry Points</button>
    </form>

    <div id="results" class="results">
        <h2>Recommended Levels</h2>
        
        <div class="risk-level">Conservative (2% Account Risk)</div>
        <div class="exit-entry">
            <div class="exit" id="conservative"></div>
            <div class="entry" id="conservativeEntry"></div>
        </div>
        
        <div class="risk-level">Moderate (5% Account Risk)</div>
        <div class="exit-entry">
            <div class="exit" id="moderate"></div>
            <div class="entry" id="moderateEntry"></div>
        </div>
        
        <div class="risk-level">Aggressive (8% Account Risk)</div>
        <div class="exit-entry">
            <div class="exit" id="aggressive"></div>
            <div class="entry" id="aggressiveEntry"></div>
        </div>

        <div class="order-explanation">
            <h3>Order Types for Your Strategy:</h3>
            <p><strong>For Exit:</strong> Use a Stop Limit Sell Order
            <br>- Set Stop Price at the calculated stop loss level
            <br>- Set Limit Price 1-2% below Stop Price to ensure execution</p>
            
            <p><strong>For Re-entry:</strong> Two approaches:
            <br>1. <strong>Limit Buy Order:</strong> Use when you expect a bounce from the re-entry level. Order will only execute if price drops to or below your limit price.
            <br>2. <strong>Stop Limit Buy Order:</strong> Use when you want confirmation of upward momentum after the dip. Set Stop Price slightly above re-entry point and Limit Price 1-2% higher.</p>
            
            <p><strong>Note:</strong> These calculations assume normal market conditions. Consider using wider stops during high volatility periods and always confirm levels with your broker's order entry rules.</p>
        </div>
    </div>

    <script>
        document.getElementById('stopLossForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const shares = Number(document.getElementById('shares').value);
            const avgCost = Number(document.getElementById('avgCost').value);
            const currentPrice = Number(document.getElementById('currentPrice').value);
            
            const positionValue = shares * currentPrice;
            
            // Calculate stop losses and re-entry points for different risk levels
            const levels = {
                conservative: calculateLevels(positionValue, 0.02, currentPrice),
                moderate: calculateLevels(positionValue, 0.05, currentPrice),
                aggressive: calculateLevels(positionValue, 0.08, currentPrice)
            };
            
            // Display results
            document.getElementById('results').style.display = 'block';
            
            document.getElementById('conservative').innerHTML = formatExitLevel(levels.conservative.stop, currentPrice, shares);
            document.getElementById('conservativeEntry').innerHTML = formatEntryLevel(levels.conservative.reentry, currentPrice, shares);
            
            document.getElementById('moderate').innerHTML = formatExitLevel(levels.moderate.stop, currentPrice, shares);
            document.getElementById('moderateEntry').innerHTML = formatEntryLevel(levels.moderate.reentry, currentPrice, shares);
            
            document.getElementById('aggressive').innerHTML = formatExitLevel(levels.aggressive.stop, currentPrice, shares);
            document.getElementById('aggressiveEntry').innerHTML = formatEntryLevel(levels.aggressive.reentry, currentPrice, shares);
        });
        
        function calculateLevels(positionValue, riskPercentage, currentPrice) {
            const maxLoss = positionValue * riskPercentage;
            const shares = Number(document.getElementById('shares').value);
            
            const stopPrice = currentPrice - (maxLoss / shares);
            const reentryPrice = stopPrice * 0.99; // 1% below stop loss
            
            return {
                stop: stopPrice,
                reentry: reentryPrice
            };
        }
        
        function formatExitLevel(stopPrice, currentPrice, shares) {
            const stopPercentage = ((currentPrice - stopPrice) / currentPrice * 100).toFixed(2);
            const potentialLoss = ((currentPrice - stopPrice) * shares).toFixed(2);
            
            return `
                <strong>Exit (Stop Loss)</strong><br>
                Stop Price: $${stopPrice.toFixed(2)}<br>
                Distance from Current: ${stopPercentage}%<br>
                Maximum Loss: $${potentialLoss}
            `;
        }
        
        function formatEntryLevel(reentryPrice, currentPrice, shares) {
            const reentryPercentage = ((currentPrice - reentryPrice) / currentPrice * 100).toFixed(2);
            
            return `
                <strong>Re-entry Point</strong><br>
                Entry Price: $${reentryPrice.toFixed(2)}<br>
                Distance from Current: ${reentryPercentage}%<br>
                Shares to Buy: ${shares}
            `;
        }
    </script>
</body>
</html>